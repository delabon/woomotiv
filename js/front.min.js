!function(e){e(window);var t,a,o=e("body"),i=woomotivObj.nonce,n=woomotivObj.ajax_url,s=!1,r=!1,m=1e3*parseInt(woomotivObj.interval),d=1e3*parseInt(woomotivObj.hide),u=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,c=window.cancelAnimationFrame||window.mozCancelAnimationFrame;var l=function(){var e,t=document.createElement("fakeelement"),a={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in a)if(void 0!==t.style[e])return a[e]}(),p=function(){var e,t=document.createElement("fakeelement"),a={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(e in a)if(void 0!==t.style[e])return a[e]}(),w=["fade","slideup","slidedown","slideright","slideleft"];function v(t,a){return(a="object"==typeof a?a:{}).action="woomotiv_"+t,a.hasOwnProperty("nonce")||(a.nonce=i),e.ajax({type:"POST",url:n,data:a})}function b(e){e=parseInt(e),t.eq(e).length||(e=0);var a=t.eq(e),o=-1!=w.indexOf(a.data("animation"))?l:p;a.addClass("wmt-current").one(o,function(){r=setTimeout(function(){a.removeClass("wmt-current"),s=setTimeout(function(){b(e+1)},m)},d)})}v("get_items").done(function(i){if(i.hasOwnProperty("data")&&0!==i.data.length){if(localStorage.getItem("woomotiv_pause_date_"+woomotivObj.site_hash))if(new Date(localStorage.getItem("woomotiv_pause_date_"+woomotivObj.site_hash))>new Date)return;var n=0;Object.keys(i.data).map(function(e,t){var a=i.data[e];n="order"===a.type?function(e,t){(e=e.popup).user.first_name&&""!==e.user.first_name||(e.user.first_name=e.user.username),e.user.last_name&&""!==e.user.last_name||(e.user.last_name="");var a=woomotivObj.template_content;return a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=a.replace(/{date}/gi,'<span class="wmt-date">'+e.date_completed+"</span>")).replace(/{new_line}/gi,"<br>")).replace(/{buyer}/gi,'<strong class="wmt-buyer">'+e.user.first_name+" "+e.user.last_name.charAt(0)+"</strong>")).replace(/{product}/gi,'<strong class="wmt-product">'+e.product.name+"</strong>")).replace(/{by_woomotiv}/gi,'<span class="wmt-by">by <span>woomotiv</span></strong>')).replace(/{city}/gi,'<strong class="wmt-city">'+e.city+"</strong>")).replace(/{country}/gi,'<strong class="wmt-country">'+e.country+"</strong>")).replace(/{state}/gi,'<strong class="wmt-state">'+e.state+"</strong>")).replace(/{buyer_first_name}/gi,'<strong class="wmt-buyer-first-name">'+e.user.first_name+"</strong>")).replace(/{buyer_last_name}/gi,'<strong class="wmt-buyer-last-name">'+e.user.last_name+"</strong>")).replace(/{buyer_username}/gi,'<strong class="wmt-buyer-username">'+e.user.username+"</strong>"),o.append('<div data-index="'+t+'" data-type="order" data-product="'+e.product.id+'" class="woomotiv-popup wmt-index-'+t+'" data-size="'+woomotivObj.size+'" data-shape="'+woomotivObj.shape+'" data-animation="'+woomotivObj.animation+'" data-position="'+woomotivObj.position+'" data-hideonmobile="'+woomotivObj.hide_mobile+'">                <div class="woomotiv-image" >                    '+(0==woomotivObj.user_avatar?e.product.thumbnail_img:e.user.avatar_img)+"                </div>                <p>                    "+a+'                    <a class="woomotiv-link"'+(1==woomotivObj.disable_link?"":' href="'+e.product.url+'"')+'></a>                    <a class="woomotiv-close '+(1==woomotivObj.hide_close_button?"__hidden__":"")+'">&times</a>                </p>            </div>'),t+1}(a,n):"review"===a.type?function(e,t){(e=e.popup).user.first_name&&""!==e.user.first_name||(e.user.first_name=e.user.username),e.user.last_name&&""!==e.user.last_name||(e.user.last_name="");var a=woomotivObj.template_review;return a=(a=(a=(a=(a=(a=(a=(a=a.replace(/{date}/gi,'<span class="wmt-date">'+e.date_completed+"</span>")).replace(/{new_line}/gi,"<br>")).replace(/{buyer}/gi,'<strong class="wmt-buyer">'+e.user.first_name+" "+e.user.last_name.charAt(0)+"</strong>")).replace(/{product}/gi,'<strong class="wmt-product">'+e.product.name+"</strong>")).replace(/{by_woomotiv}/gi,'<span class="wmt-by">by <span>woomotiv</span></strong>')).replace(/{buyer_first_name}/gi,'<strong class="wmt-buyer-first-name">'+e.user.first_name+"</strong>")).replace(/{buyer_last_name}/gi,'<strong class="wmt-buyer-last-name">'+e.user.last_name+"</strong>")).replace(/{buyer_username}/gi,'<strong class="wmt-buyer-username">'+e.user.username+"</strong>"),o.append('<div data-index="'+t+'" data-type="review" data-product="'+e.product.id+'" class="woomotiv-popup wmt-index-'+t+'" data-size="'+woomotivObj.size+'" data-shape="'+woomotivObj.shape+'" data-animation="'+woomotivObj.animation+'" data-position="'+woomotivObj.position+'" data-hideonmobile="'+woomotivObj.hide_mobile+'">                <div class="woomotiv-image" >                    '+(0==woomotivObj.user_avatar?e.product.thumbnail_img:e.user.avatar_img)+"                </div>                <p>                    "+a+'<br>                    <span class="wmt-stars">                        <span style="width:'+e.stars/5*100+'%"></span>                    </span>                    <a class="woomotiv-link"'+(1==woomotivObj.disable_link?"":' href="'+e.product.url+'"')+'></a>                    <a class="woomotiv-close '+(1==woomotivObj.hide_close_button?"__hidden__":"")+'">&times</a>                </p>            </div>'),t+1}(a,n):function(e,t){var a=(e=e.popup).content;return a=(a=(a=a.replace(/{new_line}/gi,"<br>")).replace(/\{/gi,"<strong>")).replace(/\}/gi,"</strong>"),o.append('<div data-index="'+t+'" data-type="custom" data-id="'+e.id+'" class="woomotiv-popup wmt-index-'+t+'" data-size="'+woomotivObj.size+'" data-shape="'+woomotivObj.shape+'" data-animation="'+woomotivObj.animation+'" data-position="'+woomotivObj.position+'" data-hideonmobile="'+woomotivObj.hide_mobile+'">                <div class="woomotiv-image" >                    '+e.image+"                </div>                <p>                    "+a+'                    <a class="woomotiv-link"'+(1==woomotivObj.disable_link?"":' href="'+e.link+'"')+'></a>                    <a class="woomotiv-close '+(1==woomotivObj.hide_close_button?"__hidden__":"")+'">&times</a>                </p>            </div>'),t+1}(a,n)}),t=e(".woomotiv-popup"),setTimeout(function(){a=u(function(){b(0)})},parseInt(m/2)),t.on("mouseenter",function(e){clearTimeout(s),clearTimeout(r),c(a)}),t.on("mouseleave",function(e){var o=t.filter(".wmt-current"),i=o.data("index"),n=parseInt(d/2);void 0!==i&&(setTimeout(function(){o.removeClass("wmt-current")},n),setTimeout(function(){a=u(function(){b(o.data("index")+1)})},d+d))}),t.find(".woomotiv-close").on("click",function(e){t.remove(),localStorage.setItem("woomotiv_pause_date_"+woomotivObj.site_hash,function(e,t,a){var o=new Date(e),i=function(){o.getDate()!=e.getDate()&&o.setDate(0)};switch(t.toLowerCase()){case"year":o.setFullYear(o.getFullYear()+a),i();break;case"quarter":o.setMonth(o.getMonth()+3*a),i();break;case"month":o.setMonth(o.getMonth()+a),i();break;case"week":o.setDate(o.getDate()+7*a);break;case"day":o.setDate(o.getDate()+a);break;case"hour":o.setTime(o.getTime()+36e5*a);break;case"minute":o.setTime(o.getTime()+6e4*a);break;case"second":o.setTime(o.getTime()+1e3*a);break;default:o=void 0}return o}(new Date,"minute",30))}),t.on("click",function(t){t.preventDefault();var a=e(this),o={};"order"===a.data("type")?(o.type="order",o.product_id=a.data("product")):"review"===a.data("type")?(o.type="review",o.product_id=a.data("product")):(o.type="custom",o.id=a.data("id")),v("update_stats",o).done(function(e){1!=woomotivObj.disable_link&&(location.href=a.find(".woomotiv-link").attr("href"))})})}})}(jQuery);